<HTML>
<HEAD>
  <TITLE>W3C Sample Code Library Release Notes</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<P>
<A HREF="../../"><IMG ALT="W3C" SRC="../../Icons/WWW/w3c_home" BORDER="0"></A>
<A HREF="../"><IMG ALT="libwww" SRC="../../Icons/WWW/Lib48x" BORDER="0"></A>
<IMG BORDER="0" SRC="../../Icons/WWW/relnotes48x" ALT="RELEASE">
<H1>
  Libwww Release Notes
</H1>
<P>
This page describes the new features and bug fixes for all libwww releases.
The list also includes <A HREF="http://db.w3.org/Library/latest.sql">the
latest changes</A> that are <A HREF="../cvs.html">committed to and available
from CVS </A>but not yet <A HREF="../cvs.html#Releases">in a release</A>.
<H2>
  Release 5.1n (To be released)
</H2>
<P>
These are the things that are upcoming in the next release. Also check out
the <A HREF="http://db.w3.org/Library/latest.sql">the latest changes</A>
in the CVS repository.
<H3>
  New Features
</H3>
<UL>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAccess.c?r1=1.145&amp;r2=1.146">Added
    a method</A> in the <A HREF="../src/HTAccess.html">HTAccess API</A> for posting
    forms and returning the response as a <A HREF="../src/HTChunk.html">HTChunk
    object</A>
  <LI>
    Added handler for unknown content encodings in the
    <A HREF="../../ComLine/">Command Line tool</A> to be a through line (identity
    decoding) using the <A HREF="#bestmatch">best matching mechanism</A>
  <LI>
    Added support for <A HREF="../src/HTProxy.html">regex handling of proxies</A>
    so that you can now say something like this: all URIs matching this regex
    goes to this proxy, all others go to this, etc.
  <LI>
    Better control of how much data is being sent in the
    <A HREF="../src/HTReq.html" REQUEST OBJECT &lt; / A>. Now you can both get
    the total number of bytes read and written as well as the number of entity
    (body) bytes read and written. This uses features provided by the HTNet object
    </A>
  <LI>
    The default implementation of <A HREF="../src/HTDialog.c">progress
    notifications</A> now uses the new HTRequest bytes read/written methods.
  <LI>
    The mime parser in <A HREF="../src/HTMIME.c">HTMIME.c</A> and
    <A HREF="../src/HTMIMERq.c">HTMIMERq.c</A> now uses the updated control of
    bytes read/written.
  <LI>
    Added support for version conflict detection in <A HREF="../../WinCom/">Web
    Commander</A> (update all of WinCom area)
  <LI>
    The <A HREF="../../WinCom/">Web Commander</A> - the Win32 GUI PUT sample
    application has been updated from the ground up - try it out!
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAccess.c?r1=1.144&amp;r2=1.145">Remove
    access authentication credentials</A> duplicates when doing the HTSaveFilter
    on the same resource
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAnchor.c?r1=1.77&amp;r2=1.78">Checks
    that etags are not the same when setting a new one</A>. This caused first
    the old (which was also the new) to be deleted and then created again.
  <LI>
    Fixed HTTP POST problem where small post data didn't always get posted. This
    affects several files including
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTMIME.c?r1=2.88&amp;r2=2.89">HTMIME.c</A>
    and
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTMIMERq.c?r1=2.38&amp;r2=2.39">HTMIMERq.c</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTTP.c?r1=1.164&amp;r2=1.165">Fixed
    HTTP PUT problem</A> when a 100 Continue code came more than 2 secs after
    the request.
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTTP.c?r1=1.163&amp;r2=1.164">Added
    interrupt alert message</A> to <A HREF="../../src/HTTP.c">HTTP.c</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTFilter.c?r1=2.27&amp;r2=2.28">Added
    alert message when status is 503 Retry</A> to the information filter in
    <A HREF="../../src/HTFilter.c">HTFilter.c</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTFile.c?r1=1.146&amp;r2=1.147">The
    last modified time is now stored in the anchor object when opening a local
    file</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAccess.c?r1=1.143&amp;r2=1.144">Added
    support for preconditions in the save document calls in HTAccess</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTBufWrt.c?r1=2.22&amp;r2=2.23">Deleted
    unused variable in HTBufWrt.c</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTResponse.html?r1=2.8&amp;r2=2.9">Fixed
    typo in function prototype in HTResponse.html</A>
  <LI>
    Made <TT>WWW_TraceFlag</TT> unsigned integer in
    <A HREF="../src/HTUtils.html">HTUtils.html</A> (was signed) and changed order
    in wwwsys.html so that netinet/in.h now is included before netinet/tcp.h
    in wwwsys.html. This was a problem on RC6000.
  <LI>
    Put in a few checks for invalid function arguments (NULL etc.) in
    <A HREF="../src/HTEscape.c">HTEscape.c</A> and
    <A HREF="../src/HTParse.c">HTParse.c</A>
  <LI>
    Added explicit support for HTTP preconditions (the if-* headers) so that
    they can now be turned on and off on a pr request basis. This affects
    <A HREF="../src/HTReqMan.c">HTReqMan.c</A>
    <A HREF="../src/HTReq.html">HTReq.html</A> and
    <A HREF="../src/HTReqMan.html">HTReqMan.html</A>
  <LI>
    Changed the <A NAME="bestmatch" HREF="../src/HTFormat.html#encoding">encoding
    streamstack builder</A> to support <EM>best matching</EM> (wildcard matching)
    capabilities. This means that you now can register a default decoder like
    this: <CODE>HTFormat_addCoding("*", HTIdentityCoding, HTIdentityCoding,
    0.3)</CODE>, for example where <CODE>HTIdentityCoding</CODE> is a coder provided
    by libwww. The quality indicates how much you like it (between 0.0 and 1.0)
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTProxy.c?r1=2.15&amp;r2=2.16">Now
    also removes the after authentication filter is all proxies are
    unregistered</A>
  <LI>
    Changed the progress notifications in HTAlert to also include
    <B>Interrupted!</B> This affects
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTCache.c?r1=2.50&amp;r2=2.51">HTCache.c</A>
    (a little),
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAlert.html?r1=2.51&amp;r2=2.52">HTAlert.html</A>
    (and .h), and
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTDialog.c?r1=2.27&amp;r2=2.28">HTDialog.c</A>
  <LI>
    Moved the increment of bytes written (used in PUT) from the
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTBufWrt.c?r1=2.21&amp;r2=2.22">buffered
    output steam </A>to the
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTWriter.c?r1=2.50&amp;r2=2.51">unbuffered
    output stream</A> which gives a more accurate reading.
  <LI>
    Bad typo bug when deleting before filters in
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTNet.c?r1=2.93&amp;r2=2.94">HTNetCall_addBefore</A>
    which caused deletion problems in the Filter list
  <LI>
    Fixed a problem when PUT'ing to a non-existent host (or invalid portnumber)
    in the
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAccess.c?r1=1.142&amp;r2=1.143">Save
    Filter</A>. The cleanup is now made more cleanly.
  <LI>
    Moved the <B>Done!</B> progress notification into
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTMIME.c?r1=2.87&amp;r2=2.88">HTMIME.c</A>
    instead of in
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTReader.c?r1=2.24&amp;r2=2.25">HTReader.c</A>
    as it no longer has much to do with closing the TCP connection.
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTChannl.c?r1=2.17&amp;r2=2.18">Made
    sure that local files are closed when using ANSI C file descriptors</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTWWWStr.c?r1=2.26&amp;r2=2.27">Fixed
    bug in the conversion from URI to local Windows file in HTWWWToLocal()</A>
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTAABrow.c?r1=2.46&amp;r2=2.47"
	NAME="Auth1">Fixed problem in the template generation in the access
    authentication module</A>. This can cause the authentication module to not
    find the credentials already given.
  <LI>
    <A HREF="http://dev.w3.org/cgi-bin/cvsweb/libwww/Library/src/HTHost.c?r1=2.46&amp;r2=2.47">Fixed
    strange deletion of semaphore control for non-persistent connections</A>
  <LI>
    A close socket event wasn't registered on Windows. This is now done in
    <A HREF="../src/HTHost.c">HTHost.c</A>.
  <LI>
    On some platforms, it is not possible to refer to function addresses across
    shared libraries. The result is that the libwww API that uses function addresses
    don't always work. I have added an opcode version of the
    <A HREF="../src/HTAlert.html">HTAlert API</A> to handle this for user messages
    and progress notifications.
</UL>
<H2>
  Release 5.1m May 21, 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Changed the <A HREF="../src/HTFormat.html#encoding">encoding streamstack
    builder</A> to support <EM>best matching</EM> capabilities. This means that
    you now can register a default decoder like this: <CODE>HTFormat_addCoding("*",
    HTIdentityCoding, HTIdentityCoding, 0.3)</CODE>, for example where
    <CODE>HTIdentityCoding</CODE> is a coder provided by libwww.
  <LI>
    Added support for <A HREF="../src/HTMIMERq.html">writing out <TT>Link:</TT>
    header fields</A> when <A HREF="../src/HTAccess.html">uploading a document</A>.
    The <TT>Link:</TT> header field is use to represent link relationship between
    documents
  <LI>
    Changed <A HREF="../src/HTEscape.html">HTEscape</A> to deal with silly MSDos
    file type escaping of &nbsp;the drive name (using ":").
  <LI>
    Added support for <A HREF="../../ComLine/User/CommandLine.html#auth">automatic
    authentication (!)</A> in the <A HREF="../../ComLine/">Command Line</A> Tool
    so that it is now possible to authenticate from scripts etc.
  <LI>
    <A HREF="../cvs.html">Direct access to the CVS repository</A> - checkout
    libwww and work with the latest version!
  <LI>
    Made sure that we write more often as we check for expired timers in HTWriter.c
  <LI>
    Added a "repetitive" flag to timers so that they can be created to say call
    me every 30ms over and over again
  <LI>
    Added support for building libwww as a shared library on Unix (it is already
    using DLLs on Windows). If you have any problems with shared libraries on
    your platform then <A HREF="../../INSTALL.html">run configure</A> with the
    <CODE>--disable-shared</CODE> flag and you will only get the static version.
    If you are using libwww as a shared library but do <EM>not</EM> use the
    <A HREF="../src/WWWHTML.html">libwww HTML parser</A> then you MUST include
    this <A HREF="../src/HTextImp.html">dummy implementation</A> of the
    <A HREF="../src/HText.html">HText interface</A> somewhere in your code. The
    reason for this is that the HText interface may be called (it depends a bit
    on how your platform supports shared libraries) but an implementation isn't
    provided.
  <LI>
    Added support for <A HREF="http://www.tcx.se/">MySQL</A> access in
    <A HREF="../src/HTSQL.html">this simple SQL interface</A> which takes care
    of most os the common problems encountered when talking to an SQL server.
    Currently I use this for <A HREF="../src/HTSQLLog.html">handling logging</A>
    in <A HREF="../../Robot/User/CommandLine.html#Logging">the webbot </A>but
    many other features like persistent caching, preferences, etc. can use the
    <A HREF="../src/HTSQL.html">SQL module</A> as well. You can also see some
    <A HREF="../../Robot/www-sql/">cool examples</A> of how to use the robot's
    logs when querying <A HREF="http://www.tcx.se/">MySQL</A> through
    <A HREF="http://www.daa.com.au/~james/www-sql/">www-sql</A>.
  <LI>
    Changed the name of "<TT>config.h</TT>" to "<TT>wwwconf.h</TT>" as the
    <A HREF="http://lists.w3.org/Archives/Public/www-lib/1998JanMar/0039.html">first
    name caused conflicts with other packages</A>
  <LI>
    Changed the name of "<TT>sysdep.h</TT>" to "<TT>wwwsys.h</TT>" for the same
    reason
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a bug in the <A href="../src/HTParse.html">generation of relative
    URIs</A> which caused the creation of incorrect relative URIs. Libwww uses
    relative URIs in the HTTP referer field and other places to save (often
    significant) amount of bandwidth.
  <LI>
    Decreased default max number of outstanding (pipelined) requests from 100
    to 50
  <LI>
    Does now check whether we get a broken pipe when writing to the network from
    expired timers. This was a bug that it didn't.
  <LI>
    Applied the <A HREF="Patch/5.1l/">following patches</A>
  <LI>
    Fixed a problem in the HTWWWStr.c that caused a
    <A HREF="http://lists.w3.org/Archives/Public/www-lib/1998AprJun/0000.html">Y2K
    bug if strftime isn't available</A> on the system on where libwww is running
</UL>
<H2>
  Release 5.1l March 25, 1998
</H2>
<P>
This is a small add-on to 5.1k that was released two days ago. It has a few
fixes that was discovered while working with the latest
<A HREF="http://www.yggdrasil.com/Products/Arena/">Arena browser</A>.
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Minor stuff that made PUT work nicer from a user perspective (when to ask
    what questions, etc)
  <LI>
    Fixed a few things in the direct WAIS access module
</UL>
<H2>
  Release 5.1k March 23, 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Added a simple "single user lock" on the persistent cache as it gets confused
    if multiple users are using it.
  <LI>
    On Unic, the header files are now installed when running "<TT>make
    install</TT>". The default location is
    <TT>"/usr/local/include/w3c-libwww</TT>".
  <LI>
    On Unix, aset of icons that can be used when browsing local file directories
    are also installed - the default location is
    "<TT>/usr/local/share/w3c-libwww</TT>"
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    <A HREF="Patch/5.1j/">These are the patches</A> that I have received for
    the current release. They will be applied to this upcoming release.
  <LI>
    Fixed a few bugs that make
    <A HREF="http://www.yggdrasil.com/Products/Arena/">Arena</A> run on top of
    the latest version
</UL>
<H2>
  Release 5.1j March 9, 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Made the distinction between Transfer-Encoding and Content-Transfer-Encoding
    clear - they were somewhat mixed up before. Libwww also now supports multiple
    transfer-codings as well as multiple content-codings as required by
    <A HREF="../../Protocols/History/#latest">HTTP/1.1</A>.
  <LI>
    Changed the <A HREF="../src/HTFormat.html">Stream Stack</A> to not call the
    <CODE>SaveLocally</CODE> stream any more but instead return an ErrorStream.
    The reason for this is that there are several places in the stram stack building
    algorithm where we might want to save the file to local file: when there
    is a content type that we don't understand, a content-encoding, or a
    transfer-encoding (or a combination of these) that we don't understand. Now
    we can make sure that the <CODE>SaveLocally</CODE> stream is only called
    once
  <LI>
    Added support for "<B>identity</B>" transfer-coding and content-coding
  <LI>
    Added support for Allow header when doing PUT and POST
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a problem handling wrong HTTP responses from NCSA HTTPD derived servers
    (they don't include a version number when responding to an HTTP/1.1 request)
  <LI>
    PUT now works much more reliable, and it also works on Windows (at least
    &nbsp;NT, I haven't tested it on 95).
  <LI>
    Fixed a refresh problem in the <A HREF="../../LineMode/">Line Mode Browser</A>
    which caused it to sometimes render the screen twice.
</UL>
<H2>
  Release 5.1f January 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Changed the referer HTTP header field to use relative URIs instead of absolute.
    This saves a lot of bytes on the wire
  <LI>
    Added support for <A HREF="../../Robot/User/CommandLine.html#Logging">logging
    the charset media type parameter</A>
  <LI>
    Added support for <A HREF="../../Robot/User/CommandLine.html#Inlined">logging
    when the ALT tag is missing</A> from inlined images
  <LI>
    Extended the <A HREF="../src/HTLog.html">log class</A> to support arbitrary
    log files
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed some problems in the HTRelative function in
    <A HREF="../src/HTParse.html">HTParse</A>.
</UL>
<H2>
  Release 5.1e January 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Added support for linking against a
    <A HREF="http://www.delorie.com/gnu/docs/rx/rx_3.html">POSIX Regular
    Expression</A> (regex) library. This is used in the
    <A HREF="../../Robot/">Robot</A>, for example, to support
    <A HREF="../../Robot/User/CommandLine.html#Constraints">regular expressions
    on URIs</A> to include and exclude from a traversal. The code has been tested
    with the <A HREF="http://ftp.digital.com/pub/GNU/">GNU regex library</A>.
  <LI>
    Added more <A HREF="../../Robot/User/CommandLine.html#Logging">logging features
    to the webbot</A>
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed bug in <A HREF="../src/HTWriter.html">ouputstream</A> that caused buffer
    to be overwritten in some cases when blocked on write
</UL>
<H2>
  Release 5.1d December 1997
</H2>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Lots of bug fixes in the
    <A HREF="../../Protocols/HTTP/Forum/PipeliningNotes.html">pipelining code</A>
    and increased performance
</UL>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Better logging facilities with support for <A HREF="../src/HTLog.html">multiple
    log objects</A> including referer logging, Common Log File format logging
    and general logging filters.
</UL>
<H2>
  Release 5.1c September 1997
</H2>
<UL>
  <LI>
    Lots of bug fixes
</UL>
<H2>
  Release 5.1b April 1997
</H2>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a problem in <A HREF="../src/HTRules.html">HTRules.c</A> as described
    in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00248.html">this
    bug report</A>
  <LI>
    Fixed coredump problem in <A HREF="../src/HTInet.html">HTGetTmpFileName()</A>
    as described in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00247.html">this
    bug report</A>. This affects also the
    <A HREF="../src/HTCache.html">HTCache</A> module which relies on temporary
    file names
  <LI>
    Made the <A HREF="../src/HTCache.html">persistent cache</A> more robust which
    in some cases will save a segmentation fault
  <LI>
    Fixed problem in <A HREF="../src/wwwsys.html">wwwsys.h</A> as reported in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00249.html">this
    bug report</A>
  <LI>
    Fixed problem where a request was not flushed if using blocking sockets as
    reported by
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00250.html">this
    bug report</A>.
  <LI>
    A limitation in the current persistent cache is that it only works in
    non-preemptive mode. Hence if using blocking sockets then the cache should
    be disabled. This is now the default behavior in the
    <A HREF="../src/HTProfil.html">libwww profiles</A>.
  <LI>
    Bug fixed that caused the <CODE>maxsock</CODE> variable used in
    <CODE>select()</CODE> not to be decreased when deleting a socket in the default
    <A HREF="../src/HTEvtLst.html">event manager</A>
  <LI>
    Changed the connection management so that it complies with the
    <A HREF="http://www.ics.uci.edu/pub/ietf/http/draft-ietf-http-connection-00.txt">Connection
    Management</A> draft by Jim Gettys and Alan Freier. The HTTP client now closes
    idle connections after 60 seconds which is a heuristic period chosen by Jeff
    Mogul in the paper
    "<A HREF="http://www.research.digital.com/wrl/techreports/abstracts/95.4.html">The
    Case for Persistent-Connection HTTP</A>". The number can be dynamically changed
    using the <CODE>HTHost_setPersistTimeout() </CODE>and the
    <CODE>HTHost_persistTimeout() </CODE>methods. This could be made more advanced
    so that we take into account any information given in the
    "<TT>Keep-Alive</TT>" header but isn't for now.
  <LI>
    Fixed a problem when a HTTP/1.1 server sent a response including a
    <TT>Connection: close</TT> header using the close of the TCP connection as
    a delimiter. This problem was pointed out in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00254.html">this
    bug report</A>
  <LI>
    Fixed security hole handling <A HREF="../src/HTTP.c">HTTP 305 proxy redirection
    codes</A>. The proxy location returned in the responses was enabled as a
    permanent proxy without any notification. The operation now requires explicit
    acknowledgement from the user
  <LI>
    Fixed potential (but small) security whole handling
    <A HREF="../src/HTRules.html">parsing a new rules file</A>. This operation
    now requires explicit acknowledgement from the user.
</UL>
<H2>
  Release 5.1 February 18 1997
</H2>
<H3>
  New Features and APIs
</H3>
<UL>
  <LI>
    Added support &nbsp;pipelining
  <LI>
    Support for zlib based decompression in content encoding
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    A whole bunch of them...
</UL>
<P>
  <HR>
<ADDRESS>
  Henrik Frystyk Nielsen,
  <A HREF="mailto:libwww@w3.org">libwww@w3.org</A>,<BR>
  @(#) $Id$
</ADDRESS>
</BODY></HTML>
