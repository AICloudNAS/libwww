<HTML>
<HEAD>
<TITLE>Using - Global Flags</TITLE>
<!-- Changed by: Henrik Frystyk Nielsen, 12-Oct-1995 -->
</HEAD>  
<BODY>

<A HREF="../../../"><IMG SRC="../../../Icons/WWW/WWW48x.gif" ALT="WWW"></A>
<A HREF="../../"><IMG SRC="../../../Icons/WWW/Lib48x.gif" ALT="Lib"></A>
<A HREF="./"><IMG SRC="../../../Icons/WWW/guide48x.gif" ALT="Using"></A>

<H1>Global Flags</H1>

The global flags consist of global variables, environment variables,
and preprocessor defines. Some have already been introduced in the
previous sections but this section gives a more complete listing.

<H3>Global Variables</H3>

Global variables have until recently been in widespread use throughout
the Library but as this often conflicts with a multithreaded
environment, many global variables have been replaced with thread-safe
representations. However, many modules do still contain state
independent global variables defining display options, global
time-outs, trace options etc. Typical examples are the module to
generate <A HREF="../../Implementation/HTDir.html">directory
listings</A> for HTTP, FTP, and local file access to directories and
the <A HREF="../../Implementation/HTError.html" >error handling
module</A>.

Only four specific global variables are to be mentioned in this paper,
The first two must be defined in the application before linking with
the library, and they <EM>must</EM> be assigned values with specific
semantics.

<DL>

<DT><CODE>HTAppName</CODE>

<DD>A string defining the name of the application. This value is used
in the <EM>User-Agent</EM> field in the <A
HREF="../../../Protocols/">HTTP Protocol</A> and it must obey the
semantics for this field.

<DT><CODE>HTAppVersion</CODE>

<DD>A string defining the version of the application. The value is also
used in the <CODE>User-Agent</CODE> field and must obey the general
semantics for this field. 

<DT><CODE>HTSecure</CODE>
<DD>If this flag is enabled then the application has no access to the
local file system.  This allows applications to be used as a shell for
remote logins, for example using telnet. the default value is <EM>OFF</EM>

<DT><CODE>HTImProxy</CODE>
<DD>A proxy server must have a socket as the default destination for
incoming data in order to forward data either to the proxy client or to
the remote server. If this flag is set, then  the default behavior of
sending data to the user is diabled. The default value is <EM>OFF</EM>.

</DL>

<H3>Environment Variables</H3>

Apart from the environment
variables for setting up a proxy server or a gateway described in
section <A HREF="Methods.html">Access Methods</A>, the Library supports only
two other environment variables:
</P>

<DL>
<DT><CODE>WWW_HOME</CODE>
<DD>This variable is used by the help function
<CODE>HTHomeAnchor()</CODE> to find the address of the default document
to load when a client application is started. If no <CODE>WWW_HOME</CODE>
variable has been specified at run time, by default, the Library returns
<B>http://www.w3.org/</B>.
 
<DT><CODE>USERNAME</CODE>, <CODE>LOGNAME</CODE>, <CODE>USER</CODE>
<DD>These are the variables that are searched when looking for the user
name of the current user. They are somewhat platform dependent as the
<CODE>USERNAME</CODE> is for Windows NT, and the others are for Unix
with <CODE>LOGNAME</CODE> as having highest priority.

</DL>

<H3>Preprocessor Defines</H3>

Most of the preprocessor defines
in the Library are platform dependent that are determined as a result of
the <EM>BUILD script</EM>. However, there are some few defines that on
a platform independent basis can change the default behavior of the
Library.</P>

<DL>
<DT><CODE>HT_REENTRANT</CODE>

<DD>This boolean define should be enabled if the reentrant versions
("*_r") of the system calls should be used. The name of these system
calls are currently "*_r", for example <CODE>strtok_r</CODE>. The
default value is <EM>OFF</EM>.

<DT><CODE>HT_SHARED_DISK_CACHE</CODE>

<DD>If the cache can be shared between several clients this will have
an effect on the way, update of a document will be done. The default
cache implementation of the cache manager does not support this so the
default value is NOT defined.

<DT><CODE>HT_DIRECT_WAIS</CODE>

<DD>This boolean define is enabled by the <EM>Makefile.include</EM>
file as described in section <A HREF="Methods.html">Access Methods</A>. The
default value is <EM>OFF</EM>.

<DT><CODE>HT_DEFAULT_WAIS_GATEWAY</CODE>

<DD>A constant string value which WAIS gateway to contact if
<CODE>HT_DIRECT_WAIS</CODE> is not defined and no gateway has been
defined using environment variables

<DT><CODE>HT_FTP_NO_PORT</CODE>

<DD>The FTP module can handle both <CODE>PASV</CODE> and
<CODE>PORT</CODE> when requesting a document from a FTP server. If the
application is a proxy server running on top of a firewall machine
then <CODE>PORT</CODE> is normally not allowed as a firewall does not
accept incoming connections on arbitrary ports. This define will
disable the use of <CODE>PORT</CODE>. The default value is to
<EM>use</EM> <CODE>PORT</CODE> if <CODE>PASV</CODE> fails.

<DT><CODE>HT_NO_INIT</CODE>

<DD>If this flag is defined then the Library will not initialize any
access methods or media types in the <CODE>HTLibInit()</CODE>
function, but leaves this to the application. By default, the flag is
<EM>not</EM> defined.

<DT><CODE>WWWLIB_SIG</CODE>

<DD>The Library has a very small set of signal handlers whose action
most often are simply to ignore the signals. However, due to a bug in
the TCP kernel on Solaris and other SVR4 platforms returning a
SIG_PIPE signal, some kind of handling is required on these platforms,
and the signal handling is enabled by default on these platforms.

<DT><CODE>HT_TMP_ROOT</CODE>

<DD>The default destination for temporary files if no other
destination has been given by the application. Temporary files include
files created for external presenters etc. The default value is
<CODE>/tmp</CODE> which obviously is not suited for large amount of
data.

<DT><CODE>HT_CACHE_ROOT</CODE>

<DD>If the cache is enabled and no cache root directory has been
specified then use this as the location. The default value is again
<CODE>/tmp</CODE>.

<DT><CODE>HT_NO_RULES</CODE>

<DD>If this flag is enabled then no configuration or rule file is
searched for map rules when handling a request even if a rule file has
been specified by the application. The default value is <EM>OFF</EM>

<DT><CODE>HT_NO_PROXY</CODE>

<DD>If no environment variables are to be searched for gateways or
proxies for a request. The default value is <EM>OFF</EM>

</DL>

<P>
<HR>
<ADDRESS>Henrik Frystyk, <A HREF="mailto:libwww@w3.org">libwww@w3.org</A>, July 1995</ADDRESS>
</BODY>
</HTML> 
