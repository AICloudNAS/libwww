<HTML>
<HEAD>
<TITLE>Using - Access Methods</TITLE>
</HEAD>  
<BODY>

<A HREF="../../../"><IMG SRC="../../../Icons/WWW/WWW48x.gif" ALT="WWW"></A>
<A HREF="../../"><IMG SRC="../../../Icons/WWW/Lib48x.gif" ALT="Lib"></A>
<A HREF="Overview.html"><IMG SRC="../../../Icons/WWW/guide48x.gif" ALT="Using"></A>

<H1><A NAME="methods">Enabling Access Methods</A></H1>

The Library handles a wide set of Internet Protocols as well as access
to the local file system. The current set of access methods supported
are: HTTP, FTP, Gopher, telnet, rlogin, NNTP and WAIS. All protocol
modules are dynamic modules and each module can be dynamically bound
to an access scheme as described in section <A HREF="#arc"
>Architectural Overview</A>. As an example, the URL:

<PRE>
	http://www.w3.org/
</PRE>

has the access scheme <EM>http</EM> and can be bound to the
<A HREF="../../Implementation/HTTP.html">HTTP module</A>. The binding
between a protocol module and an access method is by default done at
start up time in the <CODE>HTLibInit()</CODE> where the Library enables
all the access schemes that it provides services for. The application
can change the default behavior by providing its own initialization of
the binding between protocol modules and access methods. This can be
done in order to make applications with a limited set of Internet access
methods available or to add new protocol modules to the Library. There
are two ways of doing this:

<UL>

<LI>Disabling any initialization of the protocol modules in the
<CODE>HTLibInit()</CODE> function by using the <CODE>HT_NO_INIT</CODE>
preprocessor define as described in <A HREF="Flags.html">Global Flags</A>

<LI>Overriding the <A HREF="../../Implementation/HTInit.html">HTInit
module</A> by providing a new definition as described in <A
HREF="#override">Application Specific Modules</A>

</UL>

A single protocol module can be initialized using the function</P>

<PRE>
	HTRegisterProtocol()
</PRE>

One special case is the support for access to <A
HREF="../../../../Products/WAIS/">WAIS</A> databases. If native
support for access to a WAIS database is desired, the application must
be linked with a <A HREF="http://www.cnidr.org/" >WAIS library</A> in
which case the <A HREF="../../Implementation/HTWAIS.c"> HTWAIS</A>
module will be compiled into the Library as the interface between the
W3C Reference Library and the WAIS library. This can be done by
enabling the following lines in the <A
HREF="../Platform/Porting.html"> <EM>Makefile.include</EM></A> which
is the platform specific part of the <EM>Makefile</EM> created by the
<EM>BUILD</EM> script:

<PRE>
	WAIS = ../../../freeWAIS-0.3
	WAISLIB =  $(WAIS)/bin/client.a $(WAIS)/bin/wais.a
	MATHLIB = -lm
	WAISINC = -I$(WAIS)/ir
	WAISCFLAGS = -DDIRECT_WAIS
	HTWAIS = $(WTMP)/Library/$(WWW_MACH)/HTWAIS.o
</PRE>

It is important that the whole Library is rebuilt when doing this. In
case direct WAIS support is not present, the Library looks for a <A
HREF="../../../Gateways/WAISGate.html">WAIS gateway</A> in order to
handle the request and if no WAIS gateway is specified, the default
destination is defined as <A
HREF="wais://www.w3.org:8001/">wais://www.w3.org:8001/</A> where a
WAIS gateway is accepting connections.

<P>
<HR>
<ADDRESS>Henrik Frystyk, <A HREF="mailto:libwww@w3.org">libwww@w3.org</A>, July 1995</ADDRESS>
</BODY>
</HTML> 
