<HEADER>
<TITLE>HTParse:  URL parsing in the WWW Library</TITLE>
<NEXTID N="1">
</HEADER>
<BODY>
<H1>HTParse</H1>This module of the WWW library contains
code to parse URLs and various related
things.  Implemented by <A
NAME=z0 HREF="HTParse.c">HTParse.c</A>
.
<PRE>#ifndef HTPARSE_H
#define HTPARSE_H
#include "HTUtils.h"

</PRE>The following are flag bits which
may be ORed together to form a number
to give the 'wanted' argument to
HTParse.
<PRE>#define PARSE_ACCESS		16
#define PARSE_HOST		 8
#define PARSE_PATH		 4
#define PARSE_ANCHOR		 2
#define PARSE_PUNCTUATION	 1
#define PARSE_ALL		31


</PRE>
<H2>HTParse:  Parse a URL relative to
another URL</H2>This returns those parts of a name
which are given (and requested) substituting
bits from the related name where
necessary.
<H3>On entry</H3>
<DL>
<DT>aName
<DD> A filename given
<DT>relatedName
<DD> A name relative to which
aName is to be parsed
<DT>wanted
<DD> A mask for the bits which
are wanted.
</DL>

<H3>On exit,</H3>
<DL>
<DT>returns
<DD> A pointer to a malloc'd string
which MUST BE FREED
</DL>

<PRE>
extern char * HTParse  PARAMS((const char * aName, const char * relatedName, int wanted));


</PRE>
<H2>HTStrip: Strip white space off a
string</H2>
<H3>On exit</H3>Return value points to first non-white
character, or to 0 if none.<P>
All trailing white space is OVERWRITTEN
with zero.
<PRE>#ifdef __STDC__
extern char * HTStrip(char * s);
#else
extern char * HTStrip();
#endif

</PRE>
<H2>HTSimplify: Simplify a UTL</H2>A URL is allowed to contain the seqeunce
xxx/../ which may be replaced by
"" , and the seqeunce "/./" which
may be replaced by "/". Simplification
helps us recognize duplicate filenames.
It doesn't deal with soft links,
though. The new (shorter) filename
overwrites the old.
<PRE>/*
**	Thus, 	/etc/junk/../fred 	becomes	/etc/fred
**		/etc/junk/./fred	becomes	/etc/junk/fred
*/
#ifdef __STDC__
extern void HTSimplify(char * filename);
#else
extern void HTSimplify();
#endif


</PRE>
<H2>HTRelative:  Make Relative (Partial)
URL</H2>This function creates and returns
a string which gives an expression
of one address as related to another.
Where there is no relation, an absolute
address is retured.
<H3>On entry,</H3>Both names must be absolute, fully
qualified names of nodes (no anchor
bits)
<H3>On exit,</H3>The return result points to a newly
allocated name which, if parsed by
HTParse relative to relatedName,
will yield aName. The caller is responsible
for freeing the resulting name later.
<PRE>#ifdef __STDC__
extern char * HTRelative(const char * aName, const char *relatedName);
#else
extern char * HTRelative();
#endif


</PRE>
<H2>HTEscape:  Encode unacceptable characters
in string</H2>This funtion takes a string containing
any sequence of ASCII characters,
and returns a malloced string containing
the same infromation but with all
"unacceptable" characters represented
in the form %xy where X and Y are
two hex digits.
<PRE>extern char * HTEscape PARAMS((CONST char * str, unsigned char mask));

</PRE>The following are valid mask values.
The terms are the BNF names in the
URL document.
<PRE>#define URL_XALPHAS	(unsigned char) 1
#define URL_XPALPHAS	(unsigned char) 2
#define URL_PATH	(unsigned char) 4


</PRE>
<H2>HTUnEscape: Decode %xx escaped characters</H2>This function takes a pointer to
a string in which character smay
have been encoded in %xy form, where
xy is the acsii hex code for character
16x+y. The string is converted in
place, as it will never grow.
<PRE>extern char * HTUnEscape PARAMS(( char * str));


#endif	/* HTPARSE_H */


</PRE>end of HTParse</A><P>
</BODY>
