#       Makefile input file for W3 Library Code
#       ---------------------------------------
#
#       Copyright CERN 1990, 1991, 1994 -- see Copyright.html for conditions
#
SHELL = /bin/sh

.SUFFIXES :
.SUFFIXES : .c .o .h .html .txt
.DEFAULT  : all

# Import configuration information
VC = @VC@

CC = @CC@
VPATH = @srcdir@

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

CFLAGS = @CFLAGS@ @DEFS@ -I@srcdir@ -I.

prefix = @prefix@
exec_prefix = @exec_prefix@
top_srcdir = @top_srcdir@
srcdir = @srcdir@
transform = @program_transform_name@

LIBDIR = @exec_prefix@/lib
BINDIR = @exec_prefix@/bin
HTWAIS = @HTWAIS@

LN_S = @LN_S@
RANLIB = @RANLIB@
CHMOD = @CHMOD@
MKDIR = @MKDIR@
RM = @RM@
AR = @AR@
CP = @CP@
TAR = @TAR@
CVS = @CVS@
SED = @SED@
COMPRESS = @COMPRESS@

VMS = @srcdir@/vms

# Conversion rules
.html.h:
	-$(CHMOD) +w $@
	$(BINDIR)/www -w90 -na -p -to text/x-c $< > $@
	-$(CHMOD) -w $@

.html.txt:
	$(BINDIR)/www -n -p66 $< > $@

.c.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) -o $@ -c $<

COMMON = HTParse.o    HTAccess.o   HTTP.o         HTFile.o    HTBTree.o  \
         HTFTP.o      HTTCP.o      SGML.o         HTML.o      HTMLPDTD.o \
         HTChunk.o    HTPlain.o    HTWriter.o     HTFWriter.o HTMLGen.o  \
         HTTee.o      HTExtParse.o HTEPtoClient.o HTAtom.o    HTAnchor.o \
         HTStyle.o    HTList.o     HTString.o     HTAlert.o   HTRules.o  \
         HTFormat.o   HTInit.o     HTMIME.o       HTHistory.o HTNews.o   \
         HTGopher.o   HTTelnet.o   HTWSRC.o       $(HTWAIS)   HTAAUtil.o \
         HTAABrow.o   HTAssoc.o    HTUU.o         HTMulti.o   HTTeXGen.o \
         HTDirBrw.o   HTDescript.o HTGuess.o      HTIcons.o   HTError.o  \
         HTErrorMsg.o HTEscape.o   HTThread.o     HTEvent.o

HFILES = HTParse.h    HTAccess.h   HTTP.h         HTFile.h    HTBTree.h  \
         HTFTP.h      HTTCP.h      SGML.h         HTML.h      HTMLPDTD.h \
         HTChunk.h    HTPlain.h    HTWriter.h     HTFWriter.h HTMLGen.h  \
         HTTee.h      HTExtParse.h HTEPtoClient.h HTAtom.h    HTAnchor.h \
         HTStyle.h    HTList.h     HTString.h     HTAlert.h   HTRules.h  \
         HTFormat.h   HTInit.h     HTMIME.h       HTHistory.h HTNews.h   \
         HTGopher.h   HTTelnet.h   HTWSRC.h       HTWAIS.h    HTAAUtil.h \
         HTAABrow.h   HTAssoc.h    HTUU.h         HTMulti.h   HTTeXGen.h \
         HTDirBrw.h   HTDescript.h HTGuess.h      HTIcons.h   HTError.h  \
         HTStream.h   HTUtils.h    HText.h        HTEscape.h  HTThread.h \
         HTEvent.h    sysdep.h

# Standard targets:

all : ./libwww.a

./libwww.a : $(COMMON)
	-$(RM) -f ./libwww_$(VC).a
	$(AR) r ./libwww_$(VC).a $(COMMON)
	$(RANLIB) ./libwww_$(VC).a
	-$(RM) -f ./libwww.a
	$(LN_S) ./libwww_$(VC).a ./libwww.a

install : ./libwww.a
	$(INSTALL_DATA) ./libwww.a $(LIBDIR)/`echo libwww_$(VC).a | $(SED) '$(transform)'`
# There's no way to do this right: INSTALL would copy the file, not the link;
# but linking won't set the perms right..
	( cd $(LIBDIR) ; $(LN_S) `echo libwww_$(VC).a | $(SED) '$(transform)'` `echo libwww.a | $(SED) '$(transform)'` )


uninstall :
	-$(RM) -f $(LIBDIR)/`echo libwww_$(VC).a | $(SED) '$(transform)'`
	-$(RM) -f $(LIBDIR)/`echo libwww.a | $(SED) '$(transform)'`

mostlyclean :
	-$(RM) -f $(COMMON)

clean : mostlyclean
	-$(RM) -f ./libwww_$(VC).a ./libwww.a

distclean : clean
	-$(RM) -f ./Makefile ./config.h ./config.cache ./config.status
	-$(RM) -f ./config.log

realclean : clean
	-$(RM) -f ./Makefile ./config.h
	( cd $(srcdir) ; $(CHMOD) +w $(HFILES) ; $(RM) -f $(HFILES) )

dist : $(HFILES) README.txt Copyright.txt
	-$(MKDIR) ./../WWWLibrary_$(VC)
	( cd ./.. ; $(LN_S) ./WWWLibrary_$(VC) ./Library )
	$(CP) -pr $(srcdir) ./../WWWLibrary_$(VC)
	$(CP) -p README.txt Copyright.txt ./../WWWLibrary_$(VC)
	$(CP) -pr $(VMS) ./../WWWLibrary_$(VC)
	( cd ./.. ; $(TAR) cvf ./../WWWLibrary_$(VC).tar ./WWWLibrary_$(VC) ./Library )
	$(COMPRESS) ./../../WWWLibrary_$(VC).tar
# 	( cd $(srcdir) ; $(CVS) tag v`echo $(VC) | $(SED) 's?\.?/?'` )
	-$(RM) -rf ./../WWWLibrary_$(VC)
	echo Distribution of Library version $(VC) ready.

# Rebuild configuration files: see Autoconf documentation

$(srcdir)/configure: configure.in ../../Implementation/aclocal.m4
	( cd $(srcdir) && autoconf --localdir=../../Implementation )

$(srcdir)/config.h.in: stamp-h.in
$(srcdir)/stamp-h.in: configure.in ../../Implementation/aclocal.m4 acconfig.h
	( cd $(srcdir) && autoheader )
	date > $(srcdir)/stamp-h.in

config.h: stamp-h
stamp-h: config.h.in config.status
	./config.status

Makefile: Makefile.in config.status
	./config.status

config.status: configure
	./config.status --recheck

# Other targets
distribute : dist
inc : $(HFILES)

# Other dependancies

$(COMMON) : sysdep.h
sysdep.h : config.h

HTParse.o      : HTParse.h      HTUtils.h  HTTCP.h        HTEscape.h
HTAccess.o     : HTAccess.h     HTUtils.h  HTParse.h      HTML.h     \
                 HTRules.h      HTList.h   HText.h        HTAlert.h  \
                 HTFWriter.h    HTTee.h    HTError.h      HTTCP.h    \
                 HTThread.h
HTTP.o         : HTTP.h         HTUtils.h  HTParse.h      HTTCP.h    \
                 HTFormat.h     HTAlert.h  HTMIME.h       HTML.h     \
                 HTInit.h       HTAccess.h HTAABrow.h     HTTee.h    \
                 HTFWriter.h    HTError.h  HTChunk.h      HTThread.h
HTFile.o       : HTFile.h       HTUtils.h  HTParse.h      HTTCP.h    \
                 HTFTP.h        HTAnchor.h HTAtom.h       HTWriter.h \
                 HTFWriter.h    HTInit.h   HTBTree.h      HTFormat.h \
                 HTMulti.h      HTError.h
HTBTree.o      : HTBTree.h      HTUtils.h
HTFTP.o        : HTFTP.h        HTUtils.h  HTParse.h      HTTCP.h    \
                 HTAnchor.h     HTFile.h   HTBTree.h      HTChunk.h  \
                 HTAlert.h      HTDirBrw.h HTError.h
HTTCP.o        : HTTCP.h        HTUtils.h  HTAtom.h       HTList.h   \
                 HTParse.h      HTAccess.h HTError.h      HTThread.h
SGML.o         : SGML.h         HTUtils.h  HTChunk.h
HTML.o         : HTML.h         HTAtom.h   HTChunk.h      HText.h    \
                 HTStyle.h      HTAlert.h  HTMLGen.h      HTParse.h
HTMLPDTD.o     : HTMLPDTD.h
HTChunk.o      : HTChunk.h      HTUtils.h
HTPlain.o      : HTPlain.h      HTUtils.h  HText.h        HTStyle.h
HTWriter.o     : HTWriter.h     HTUtils.h
HTFWriter.o    : HTFWriter.h    HTFormat.h HTAlert.h      HTFile.h  \
                 HTList.h       HTParse.h
HTMLGen.o      : HTMLGen.h      HTMLPDTD.h HTStream.h     SGML.h    \
                 HTFormat.h
HTTee.o        : HTTee.h
HTExtParse.o   : HTExtParse.h   HTFormat.h HTEPtoClient.h
HTEPtoClient.o : HTEPtoClient.h HTFormat.h
HTAtom.o       : HTAtom.h       HTUtils.h  HTList.h
HTAnchor.o     : HTAnchor.h     HTUtils.h  HTFormat.h     HTParse.h \
                 HTFWriter.h
HTStyle.o      : HTStyle.h      HTUtils.h
HTList.o       : HTList.h
HTString.o     : HTString.h     HTUtils.h
HTAlert.o      : HTAlert.h
HTRules.o      : HTRules.h      HTFile.h   HTParse.h      HTAAUtil.h
HTFormat.o     : HTFormat.h     HTUtils.h  HTML.h         HTMLPDTD.h \
                 HTAlert.h      HTList.h   HTFWriter.h    HTPlain.h  \
                 SGML.h         HTML.h     HTMLGen.h      HTTCP.h    \
                 HTGuess.h      HTError.h  HTThread.h
HTInit.o       : HTInit.h       HTML.h     HTList.h       HTPlain.h  \
                 HTMLGen.h      HTFile.h   HTFormat.h     HTMIME.h   \
                 HTWSRC.h       HTNews.h   HTFWriter.h
HTMIME.o       : HTMIME.h       HTFormat.h HTAlert.h
HTHistory.o    : HTHistory.h
HTNews.o       : HTNews.h       HTUtils.h  HTML.h         HTParse.h  \
                 HTFormat.h     HTAlert.h  HTError.h
HTGopher.o     : HTGopher.h     HTUtils.h  HTParse.h      HTTCP.h    \
                 HTIcons.h      HTAccess.h HTFormat.h     HTError.h  \
                 HTFile.h       HTML.h     HTMLPDTD.h     HTDirBrw.h
HTTelnet.o     : HTTelnet.h     HTUtils.h  HTParse.h      HTAnchor.h \
                 HTTP.h         HTFile.h   HTAccess.h     HTAlert.h
HTWSRC.o       : HTWSRC.h       HTUtils.h  HTML.h         HTParse.h
HTWAIS.o       : HTWAIS.h       HTUtils.h  HTParse.h      HTAccess.h \
                 HTError.h      HTML.h     HTFormat.h     HTTCP.h    \
                 HTML.h
HTAAUtil.o     : HTAAUtil.h     HTUtils.h  HTAssoc.h
HTAABrow.o     : HTAABrow.h     HTUtils.h  HTAAUtil.h     HTUU.h     \
                                HTString.h HTParse.h      HTList.h   \
                                HTAlert.h  HTAssoc.h      HTAccess.h
HTAssoc.o      : HTAssoc.h      HTAAUtil.h HTString.h
HTUU.o         : HTUU.h         HTUtils.h
HTMulti.o      : HTMulti.h      HTFile.h   HTList.h
HTTeXGen.o     : HTTeXGen.h     HTMLPDTD.h HTStream.h     SGML.h     \
                 HTFormat.h
HTDirBrw.o     : HTDirBrw.h     HTUtils.h  HTMLPDTD.h     HTFile.h   \
                 HTAnchor.h     HTParse.h  HTFWriter.h    HTInit.h   \
                 HTBTree.h      HTFormat.h HTChunk.h      HTIcons.h  \
                 HTDescript.h   HTError.h
HTDescript.o   : HTDescript.h   HTUtils.h  HTList.h       HTAAUtil.h \
                 HTAccess.h     HTFile.h
HTGuess.o      : HTGuess.h      HTFormat.h HTAlert.h      HTList.h
HTIcons.o      : HTIcons.h      HTUtils.h  HTMLPDTD.h     HTAnchor.h \
                 HTParse.h      HTFile.h   HTFormat.h     HTChunk.h
HTError.o      : HTError.h      HTUtils.h  HTTCP.h
HTErrorMsg.o   : HTUtils.h      HTAccess.h HTAlert.h      HTTCP.h    \
                 HTChunk.h      HTError.h
HTEvent.o      : HTUtils.h      HTAccess.h HTError.h      HTThread.h \
                 HTList.h       HTEvent.h
HTThread.o     : HTUtils.h      HTAccess.h HTError.h      HTThread.h
HTAABrow.h     : sysdep.h       HTUtils.h  HTAAUtil.h     HTList.h   \
                 HTAssoc.h      HTAccess.h
HTAAUtil.h     : sysdep.h       HTUtils.h  HTList.h
HTAccess.h     : sysdep.h       HTList.h   HTAnchor.h     HTAAUtil.h \
                 HTAABrow.h
HTAlert.h      : sysdep.h
HTAnchor.h     : sysdep.h       HTList.h   HTAtom.h       HTFormat.h
HTAssoc.h      : sysdep.h       HTUtils.h  HTList.h
HTAtom.h       : sysdep.h       HTUtils.h  HTList.h
HTBtree.h      : sysdep.h
HTChunk.h      : sysdep.h
HTDescript.h   : sysdep.h
HTDirBrw.h     : sysdep.h       HTFTP.h
HTEPtoClient.h : sysdep.h       HTStream.h
HTError.h      : sysdep.h       HTAccess.h
HTExtParse.h   : sysdep.h       HTStream.h
HTFTP.h        : sysdep.h       HTChunk.h
HTFWriter.h    : sysdep.h       HTStream.h HTFormat.h
HTFile.h       : sysdep.h       HTFormat.h HTAccess.h    HTML.h     \
                 HTDirBrw.h
HTFormat.h     : sysdep.h       HTUtils.h  HTAtom.h      HTList.h   \
                 HTAnchor.h
HTGopher.h     : sysdep.h
HTGuess.h      : sysdep.h       HTStream.h HTFormat.h
HTHistory.h    : sysdep.h       HTFormat.h HTAnchor.h
HTIcons.h      : sysdep.h       HTFormat.h
HTInit.h       : sysdep.h       HTUtils.h  HTList.h
HTList.h       : sysdep.h       HTUtils.h
HTMIME.h       : sysdep.h       HTStream.h HTAnchor.h
HTML.h         : sysdep.h       HTUtils.h  HTFormat.h    HTAnchor.h \
                 HTMLPDTD.h
HTMLDTD.h      : sysdep.h       HTUtils.h
HTMLGen.h      : sysdep.h       HTML.h     HTStream.h
HTMLPDTD.h     : sysdep.h       HTUtils.h  SGML.h
HTMulti.h      : sysdep.h       HTFile.h
HTNews.h       : sysdep.h       HTAccess.h HTAnchor.h
HTParse.h      : sysdep.h       HTUtils.h
HTPlain.h      : sysdep.h       HTFormat.h
HTRules.h      : sysdep.h       HTUtils.h  HTAccess.h
HTStream.h     : sysdep.h       HTUtils.h
HTString.h     : sysdep.h       HTUtils.h
HTStyle.h      : sysdep.h       HTUtils.h  HTFormat.h    HTAnchor.h \
                 HTML.h
HTTCP.h        : sysdep.h       HTUtils.h  HTAccess.h
HTTP.h         : sysdep.h       HTAccess.h
HTTeXGen.h     : sysdep.h       HTML.h     HTStream.h
HTTee.h        : sysdep.h       HTStream.h
HTTelnet.h     : sysdep.h       HTAccess.h
HTUU.h         : sysdep.h       HTUtils.h
HTUtils.h      : sysdep.h       HTString.h
HTWAIS.h       : sysdep.h       HTUtils.h  HTAccess.h
HTWSRC.h       : sysdep.h       HTUtils.h  HTFormat.h
HTWriter.h     : sysdep.h       HTStream.h
HText.h        : sysdep.h       HTAnchor.h HTStyle.h     HTStream.h \
                 SGML.h
SGML.h         : sysdep.h       HTUtils.h  HTStream.h

# Other common tags, unused here:

TAGS :
info :
dvi :
check :
installcheck :
installdirs :

depend :

