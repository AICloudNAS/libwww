<HTML>
<HEAD>
<TITLE>ANSI C FILE Stream</TITLE>
<!-- Changed by: Henrik Frystyk Nielsen,  6-Dec-1995 -->
<NEXTID N="z4">
</HEAD>
<BODY>

<H1>Wrting to a File using ANSI C</H1>

<PRE>
/*
**	(c) COPYRIGHT MIT 1995.
**	Please first read the full copyright statement in the file COPYRIGH.
*/
</PRE>

It is useful to have both FWriter and Writer for environments in which
<CODE>fdopen()</CODE> doesn't exist for example. The module contains
the following parts:

<UL>
<LI><A HREF="#BlackHole">A Balckhole for absorbing data</A>
<LI><A HREF="#write">A File Writer Stream</A>
<LI><A HREF="#converters">Converters using the file writer stream</A>
</UL>


This module is implemented by <A HREF="HTFWrite.c">HTFWrite.c</A>,
and it is a part of the <A
HREF="http://www.w3.org/pub/WWW/Library/">
W3C Reference Library</A>.


<PRE>
#ifndef HTFWRITE_H
#define HTFWRITE_H

#include "HTStream.h"
#include "HTFormat.h"
</PRE>

<H2>Utility Streams</H2>

We have a few dummy streams that can be used when needed.

<H3><A NAME="BlackHole">Black Hole Stream</A></H3>

This stream simply absorbs data without doing anything what so ever.

<PRE>
extern HTStream * HTBlackHole (void);
extern HTConverter HTBlackHoleConverter;
</PRE>

<H3>Through Line</H3>

This stream just pumps data right through.

<PRE>
extern HTConverter HTThroughLine;
</PRE>

<A NAME="converters"><H2>Local File Dump Converters</H2></A>

This is the set of functions that can be registered as
converters.

<PRE>
extern HTConverter HTSaveAndExecute, HTSaveLocally, HTSaveAndCallback;
</PRE>

<A NAME="tmp"><H2>Location of Temporary Files</H2></A>

<CODE>HTSaveAndCallback</CODE> will save to a cache file and call the
request-&gt;callback function with the filename as parameter. The
destination for temporary files can be managed by the following
functions:

<PRE>
extern BOOL  HTTmp_setRoot		(CONST char * tmp_root);
extern CONST char * HTTmp_getRoot	(void);
extern void  HTTmp_freeRoot		(void);
</PRE>

The <CODE>HTTmp_freeRoot</CODE> is called by the <A
HREF="HTReq.html#Library">HTLibTerminate</A> function. The default
value is defined in <A HREF="HTAccess.html#Addresses">HTReq.html</A>

<H2><A NAME="write">Set up a Stream to a File</A></H2>

This function puts up a new stream given an open file descripter. If the file
is not to be closed afterwards, then set leave_open = NO.

<PRE>
extern HTStream * HTFWriter_new	(FILE *	fp, BOOL leave_open);

#endif
</PRE>

End of declaration module
</BODY>
</HTML>
