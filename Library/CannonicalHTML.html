<HTML><HEAD><TITLE>CannonicalHTML -- Library</TITLE><NEXTID N="z2">
</HEAD><BODY><H1>A cannonical Form for HTML</H1>As there are many ways of
writing HTML which are equivalent,
it is difficult to compare to HTML files for similarity.
 This gives problems for example with  code management systems (CVS,
VAX/CMS etc) which work by comparing old and new files.<P>The WWW common code
library has a module for generating HTML in a somwhat cannonicalised form.
 Using this, for example, the line mode browser has a <A
HREF="/Net/dxcern/userd/timbl/hypertext/WWW/LineMode/Defaults/CommandLine.html#z28"
NAME="z1">-reformat</A> option which can be used to generate a cannonical
version of any document.</BODY><BODY><H2>Requirements</H2></BODY><BODY>
The  requirements for the form are</BODY><BODY><UL>
·	It should change as few lines as possible ehwne typical small changes are
made;<LI>·	It should be reasonably easy for a human to read and make sense of 
the source;<LI>·	There should be as few as possible differences in syntax
which have absoluetely no semantic significance.</UL></BODY><BODY><H2>The form
</H2></BODY><BODY>Arbitrary properties of the cannonical form are as follows:
</BODY><BODY><UL>·	Element tags are in upper case</UL></BODY><BODY><UL>
·	Attribute names are in upper case<LI>·	Attributes are given in alphabetical
order by attribute name<LI>·	Line breaks are only made as described below</UL>
</BODY><BODY><H3>Line breaks</H3></BODY><BODY>
The division into lines is done so that except when impossible all<BR>lines
are less than 80 characters long.
 Various possible break points are checked in order of "cleanness".
  A higher cleanness break is always made in preference to a lower cleanness
break, so long as the resulting line is less than 80 characters.
For breaks of a given cleanness,
the righthandmost is used so as to give the longest line.
If no breaks are possible within 80 characters,
then the first possible break after is made.
The cleanness of  the various allowed breaks are as follows:</BODY><BODY><PRE>
In text:

</PRE></BODY><BODY><PRE>
Space following full point *		7
			Space following colon *			6
			Space following semicolon *		5
			Space following comma *			4
	In SGML markup:
			Space preceding attribute name		1
        
	Between markup and text:
			After non-empty element start tag *	3
			Before non-empty element end tag *	1


</PRE></BODY><BODY><PRE>
* except within preformatted sections.


</PRE></BODY><BODY>
When lines are broken at spaces, the space is replaced by the new line.
Otherwise,
a new line is inserted.<P>Note that because in principle one can have
preformatted sections of great width,
and because free text sections may have spaceless sequences of any length,
there is no guarantee that a document in cannonical form will not have lines
of greater than 80 characters.  In most cases, however, it will not.<BR> 
</BODY><BODY><ADDRESS>Tim BL</ADDRESS></BODY></HTML>
