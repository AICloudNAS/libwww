<HTML>
<HEAD>
  <TITLE>Getting Libwww from the CVS Repository</TITLE>
  <LINK rel=STYLESHEET href="../StyleSheets/Area/Overview.css" type="text/css">
</HEAD>
<BODY BGCOLOR="#ffffff">
<P>
<A HREF="../"><IMG SRC="../Icons/WWW/w3c_home" ALT="W3C" BORDER="0"></A>
<A HREF="./"><IMG SRC="../Icons/WWW/Lib48x" ALT="libwww" BORDER="0"></A>
<H1>
  Getting Libwww from the CVS Repository
</H1>
<DIV class="intro">
  Using <A HREF="http://www.cyclic.com/cvs/info.html">CVS</A> allows <B>YOU</B>
  to follow the development of <A HREF="./">libwww</A> and its
  <A HREF="User/Applications.html">sample applications</A> closely and to
  contribute much easier with patches and new features. Before you start, make
  sure that you are familiar with <A HREF="BeforeCommitting.html">our rules
  for working with CVS</A>. The following requires that you are familiar with
  CVS - if not then look at
  <A HREF="http://www.cyclic.com/cvs/info.html">Cyclic's pages on CVS</A> or
  the <A HREF="http://www.loria.fr/~molli/cvs-index.html">excellent
  information</A> provided by
  <A HREF="http://www.loria.fr/~molli/">Pascal.Molli</A>.
  <UL>
    <LI>
      <A HREF="#Releases">How does libwww releases and CVS work together?</A>
    <LI>
      <A HREF="#Anonymous">How to check out libwww from CVS</A>
    <LI>
      <A HREF="#SSH">SSH Based CVS Checkout</A>
    <LI>
      <A HREF="#update">How to get the latest edits from CVS</A>
    <LI>
      <A HREF="#Write">CVS Write access and policy</A>
    <LI>
      <A HREF="#Boot">How to get bootstrapped after checking out</A>
    <LI>
      <A HREF="#Compiling">How to compile libwww</A>
  </UL>
</DIV>
<P>
  <HR>
<H2>
  <A NAME="Releases">Libwww Releases</A>
</H2>
<P>
First of all, using CVS allows you to use the very latest version of libwww
- as soon as a fix or a new feature is commit'ed to the CVS repository then
you can update your working version and you will have it right away.
<P>
The purpose of "releases" is to say that now we believe that the code is
stable with a well defined set of features. Until now, we have been giving
out distribution files every time we announced a release. This will not change,
but you can <A HREF="http://dev.w3.org/cgi-bin/cvsweb/">use the CVS
repository</A> in exactly the same way - often with much less overhead than
dealing with a distribution package.
<P>
Every release is marked in the CVS repository using tags, so that it is possible
to retrieve a complete release using the CVS <CODE>-r </CODE>option (note
that <CODE>-r</CODE> is "sticky"). Check out the online
<A HREF="http://dev.w3.org/cgi-bin/cvsweb/">CVS log walker</A> for the current
set of release tags. We were less strict tagging all the files in early releases
so don't go too far back in the past if you expect to be able to compile
the code!
<H2>
  <A NAME="Anonymous">Anonymous CVS Checkout</A>
</H2>
<P>
This is read-only access which means that you can check out the code but
not commit any changes. It is available to everybody, and it allows you to
make up-to-date patches which are much easier for the libwww maintainers
to integrate. The instructions should work for both
<A HREF="http://www.cyclic.com/cvs/unix.html">Unix</A> and
<A HREF="http://www.cyclic.com/cvs/windows.html">Windows</A>. Before you
can check out the sources, you need to be running CVS 1.9 or later, and login
by running the following command:
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public login</B>
</PRE>
<P>
after which you type "<STRONG>anonymous</STRONG>" as password. To get the
latest version from the CVS repository, run this command:
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public -z3 checkout libwww</B>
</PRE>
<P>
After which you will get all the code coming at you, you'd better have at
least 10MBytes available on your machine. If you want to get a specific release
using CVS tags then you need to add a <CODE>-r</CODE> option, for example
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public -z3 -r Release-5-1m checkout libwww</B>
</PRE>
<P>
Check the <A HREF="http://dev.w3.org/cgi-bin/cvsweb/">CVS log walker</A>
for the current set of release tags.
<H2>
  <A NAME="SSH">SSH Based CVS Checkout</A>
</H2>
<P>
Read/Write access to the CVS repository is done through
<A HREF="http://www.cs.hut.fi/ssh/">SSH</A>. However, it means that you
<B>MUST</B> have SSH access to the repository. You setup CVS to use SSH as
remote shell by setting the <CODE>CVS_RSH</CODE> env variable. Using bash
or similar, it looks like this:
<PRE>% <B>export CVS_RSH=/usr/local/bin/ssh</B>
</PRE>
<P>
When you are using SSH, you don't need to do a CVS login. Instead you can
just go ahead checking out libwww like this
<PRE>% <B>cvs -d dev.w3.org:/sources/public checkout libwww</B>
</PRE>
<P>
and you will be prompted for your SSH credentials. Again, if you want a specific
revision then use something like this
<PRE>% <B>cvs -d dev.w3.org:/sources/public -r Release-5-1m checkout libwww</B>
</PRE>
<P>
The <A HREF="http://www.apache.org">Apache Group</A> has some
<A HREF="http://dev.apache.org/nt-cvs-ssh.txt">special notes on how to use
SSH for Windows</A>.
<H2>
  <A NAME="update">How to get the latest edits from CVS</A>
</H2>
<P>
The big advantage of using CVS is that you easily can keep your version of
the code base up to date with the latest edits and changes that are committed
to CVS. Whenever something has been committed, a notification will be sent
to the
&lt;<A HREF="http://lists.w3.org/Archives/Public/www-lib/">www-lib@w3.org</A>&gt;
mailing list (<A HREF="http://www.w3.org/Mail/Request">see here how to
subscribe</A>) and also described in the <A HREF="User/ReleaseNotes.html">list
of new features</A>.
<P>
Once you have checked out the libwww CVS tree, you can get any updates committed
to the tree by using the
<A HREF="http://www.loria.fr/~molli/cvs/doc/cvs_16.html#SEC148">cvs update
command</A> like this
<PRE>% <B>cd libwww</B>
% <B>cvs update</B>
% <B>cd ..</B>
</PRE>
<P>
Remember that some of the automatically generated header files (<TT>*.h</TT>)
or the Windows DLL files (<TT>*.dll</TT>) may have to be regenerated after
a checkout - please <A HREF="#Easy">repeat the first step from the bootstrapping
mechianism</A> in order to do this.
<H2>
  <A NAME="Write">CVS Write Access</A>
</H2>
<P>
<A HREF="BeforeCommitting.html">CVS Write access</A> is currently reserved
to the <A HREF="/People/W3Cpeople.html">W3C team</A>. Before writing anything
to the repository make sure that you have read the <A HREF="User/Style/">libwww
style guide</A> as well as <A HREF="BeforeCommitting.html"><B>the list of
things to do</B></A> before doing a CVS commit.
<H2>
  <A NAME="Boot">Getting Bootstrapped</A>
</H2>
<P>
When you get libwww from CVS there are some files (header files, make files,
and Windows def files) that have to be generated before you can compile it.
Start <A HREF="#Easy">here</A> and work your way down...
<H3>
  <A NAME="Easy">The Easy Start</A>
</H3>
<P>
If you really only want to generate the header files (<B>for both Unix and
Windows</B>) and the DLL def files for Windows then you can run
<A HREF="../config/winConfigure.pl">this Perl script</A> provided by
<A HREF="/People/Eric/">Eric Prud'hommeaux</A>, which you can find in the
<CODE>config</CODE> directory after you have checked out the source from
CVS. Run it as this
<PRE>% <B>cd libwww</B>
% <B>perl config/winConfigure.pl</B>
</PRE>
<P>
The script also runs on Unix - never mind that it gives a few warnings -
they are all OK. Running it of course requires that you have
<A HREF="http://www.perl.org">Perl</A> on your machine!
<P>
If you are <A HREF="../INSTALL.html#Windows">compiling for Windows</A> this
should be enough if you are using the
<A HREF="User/Platform/WinDLL.html#Make">MSVC makefiles</A>. On Unix, you
<A HREF="#More">need some more</A>...
<H3>
  <A NAME="More">Adding a bit of Complexity</A>
</H3>
<P>
This is mostly for Unix people. First, check that you have the following
programs with the correct version number:
<P>
<DL>
  <DT>
    <B><A HREF="http://www.gnu.org/software/automake/index.html">GNU automake</A>
    (at least version 1.3)</B>
  <DD>
    Automake is a tool for automatically generating Makefile.in's which are used
    by autoconf
  <DT>
    <B><A HREF="http://www.gnu.org/order/ftp.html">GNU autoconf</A> (at least
    version 2.12)</B>
  <DD>
    A tool for automatically generating Makefile's which are used by make
  <DT>
    <B><A HREF="http://www.gnu.org/software/libtool/libtool.html">GNU libtool</A>
    (at least version 1.1)</B>
  <DD>
    A tool for automatically handling generation of shared libraries
  <DT>
    <B><A HREF="../LineMode/">W3C www</A></B>
  <DD>
    The Line Mode Browser is used to generate the header files (from
    <CODE>.html</CODE> to <CODE>.h</CODE>). If you have already done this
    <A HREF="#Easy">the easy way</A> then you don't need it in order to get
    bootstrapped and can just install the version that you compile here.
</DL>
<P>
I also <B>strongly</B> recommend that you are using
<A HREF="http://www.gnu.org/software/make/make.html">GNU make</A> and
<A HREF="http://www.gnu.org/software/gcc/gcc.html">GCC</A>. Many OS specific
make's don't have the libwww make files.
<P>
After having checked that you have the programs you need, you are now ready
to execute the commands
<PRE>% <B>aclocal</B>
% <B>automake</B>
% <B>autoconf</B>
</PRE>
<P>
Note the following:
<UL>
  <LI>
    You will see some warnings about <CODE>AC_TRY_RUN</CODE> -
    <A HREF="http://subzero.campus.luth.se/FreeDocs/autoconf-2.12/autoconf_44.html#IDX36">that's
    OK!</A>
  <LI>
    Libwww uses <A HREF="http://www.gnu.org/software/libtool/libtool.html">GNU
    Libtool</A> in order to build shared libraries on a variety of systems. While
    this is very nice for making usable binaries, it can be a pain when trying
    to debug a program. For that reason, compilation of shared libraries can
    be turned off by specifying the <CODE>--disable-shared</CODE> option to
    <CODE>configure</CODE>.
</UL>
<H2>
  <A NAME="Compiling">Compiling libwww</A>
</H2>
<P>
Now you have a set of files equivalent to what you normally get in a distribution
file. You are now ready to <A HREF="../INSTALL.html#Unix">compile the
software</A>
<P>
  <HR>
<ADDRESS>
  <A HREF="../People/Frystyk/">Henrik Frystyk Nielsen</A>,<BR>
  @(#) $Id$
</ADDRESS>
</BODY></HTML>
