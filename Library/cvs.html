<HTML>
<HEAD>
  <TITLE>Getting Libwww from the CVS Repository</TITLE>
  <LINK rel=STYLESHEET href="../StyleSheets/Area/Overview.css" type="text/css">
</HEAD>
<BODY BGCOLOR="#ffffff">
<P>
<A HREF="../"><IMG SRC="../Icons/WWW/w3c_home" ALT="W3C" BORDER="0"></A>
<A HREF="./"><IMG SRC="../Icons/WWW/Lib48x" ALT="libwww" BORDER="0"></A>
<H1>
  Getting Libwww from the CVS Repository
</H1>
<DIV class="intro">
  Using <A HREF="http://www.cyclic.com/cvs/info.html">CVS</A> allows <B>YOU</B>
  to follow the development of <A HREF="./">libwww</A> and its
  <A HREF="User/Applications.html">sample applications</A> closely and to
  contribute much easier with patches and new features. Before you start, make
  sure that you are familiar with <A HREF="BeforeCommitting.html">our rules
  for working with CVS</A>. The following requires that you are familiar with
  CVS - if not then look at
  <A HREF="http://www.cyclic.com/cvs/info.html">Cyclic's pages on CVS</A> or
  the <A HREF="http://www.loria.fr/~molli/cvs-index.html">excellent
  information</A> provided by
  <A HREF="http://www.loria.fr/~molli/">Pascal.Molli</A>.
  <UL>
    <LI>
      <A HREF="#Releases">How does libwww releases and CVS work together?</A>
    <LI>
      <A HREF="#Anonymous">How to check out libwww from CVS</A>
    <LI>
      <A HREF="#SSH">SSH Based CVS Checkout</A>
    <LI>
      <A HREF="#update">How to get the latest edits from CVS</A>
    <LI>
      <A HREF="#Write">CVS Write access and policy</A>
    <LI>
      <A HREF="#Boot">How to get bootstrapped after checking out</A>
    <LI>
      <A HREF="#Compiling">How to compile libwww</A>
  </UL>
</DIV>
<P>
  <HR>
<H2>
  <A NAME="Releases">Libwww Releases</A>
</H2>
<P>
First of all, using CVS allows you to use the very latest version of libwww
- as soon as a fix or a new feature is commit'ed to the CVS repository then
you can update your working version and you will have it right away.
<P>
The purpose of "releases" is to say that now we believe that the code is
stable with a well defined set of features. Until now, we have been giving
out distribution files every time we announced a release. This will not change,
but you can <A HREF="http://dev.w3.org/cgi-bin/cvsweb/">use the CVS
repository</A> in exactly the same way - often with much less overhead than
dealing with a distribution package.
<P>
Every release is marked in the CVS repository using tags, so that it is possible
to retrieve a complete release using the CVS <CODE>-r </CODE>option (note
that <CODE>-r</CODE> is "sticky"). Check out the online
<A HREF="http://dev.w3.org/cgi-bin/cvsweb/">CVS log walker</A> for the current
set of release tags. We were less strict tagging all the files in early releases
so don't go too far back in the past if you expect to be able to compile
the code!
<H2>
  <A NAME="Anonymous">Anonymous CVS Checkout</A>
</H2>
<P>
This is read-only access which means that you can check out the code but
not commit any changes. It is available to everybody, and it allows you to
make up-to-date patches which are much easier for the libwww maintainers
to integrate. The instructions should work for both
<A HREF="http://www.cyclic.com/cvs/unix.html">Unix</A> and
<A HREF="http://www.cyclic.com/cvs/windows.html">Windows</A>. Before you
can check out the sources, you need to be running CVS 1.9 or later, and login
by running the following command:
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public login</B>
</PRE>
<P>
after which you type "<STRONG>anonymous</STRONG>" as password. To get the
<STRONG>latest</STRONG> version from the CVS repository, run this command:
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public -z3 checkout libwww</B>
</PRE>
<P>
After which you will get all the code coming at you, you'd better have at
least 10MBytes available on your machine. Now you are ready to
<A HREF="#Boot">getting boot strapped</A>.
<H3>
  <A NAME="revision">Checkout of Specific Revision</A>
</H3>
<P>
If you want to get a <A HREF="#Releases">specific release</A> using CVS tags
then you can do this by uisng the the CVS "<TT>-r</TT>" option, for example
<PRE>% <B>cvs -d :pserver:anonymous@dev.w3.org:/sources/public -z3 -r Release-5-1m checkout libwww</B>
</PRE>
<P>
Check the <A HREF="http://dev.w3.org/cgi-bin/cvsweb/">CVS log walker</A>
for the current set of release tags. If you at some point want to revert
to the latest untagged version then you should use the following command:
<PRE>% <B>cd libwww</B>
% <B>cvs -z3 update -A</B>
</PRE>
<H2>
  <A NAME="SSH">SSH Based CVS Checkout</A>
</H2>
<P>
Read/Write access to the CVS repository is done through
<A HREF="http://www.cs.hut.fi/ssh/">SSH</A>. However, it means that you
<B>MUST</B> have SSH access to the repository. You setup CVS to use SSH as
remote shell by setting the <CODE>CVS_RSH</CODE> env variable. Using bash
or similar, it looks like this:
<PRE>% <B>export CVS_RSH=/usr/local/bin/ssh</B>
</PRE>
<P>
When you are using SSH, you don't need to do a CVS login. Instead you can
just go ahead checking out libwww like this
<PRE>% <B>cvs -d dev.w3.org:/sources/public checkout libwww</B>
</PRE>
<P>
and you will be prompted for your SSH credentials. Again, if you want a specific
revision then use something like this
<PRE>% <B>cvs -d dev.w3.org:/sources/public -r Release-5-1m checkout libwww</B>
</PRE>
<P>
The <A HREF="http://www.apache.org">Apache Group</A> has some
<A HREF="http://dev.apache.org/nt-cvs-ssh.txt">special notes on how to use
SSH for Windows</A>.
<H2>
  <A NAME="update">How to get the latest edits from CVS</A>
</H2>
<P>
The big advantage of using CVS is that you easily can keep your version of
the code base up to date with the latest edits and changes that are committed
to CVS. Whenever something has been committed, a notification will be sent
to the
&lt;<A HREF="http://lists.w3.org/Archives/Public/www-lib/">www-lib@w3.org</A>&gt;
mailing list (<A HREF="http://www.w3.org/Mail/Request">see here how to
subscribe</A>) and also described in the <A HREF="User/ReleaseNotes.html">list
of new features</A>.
<P>
Once you have checked out the libwww CVS tree (<A HREF="#revision">not a
specific revision</A>), you can get any updates committed to the tree by
using the <A HREF="http://www.loria.fr/~molli/cvs/doc/cvs_16.html#SEC148">cvs
update command</A> like this
<PRE>% <B>cd libwww</B>
% <B>cvs -z3 update -d</B>
% <B>cd ..</B>
</PRE>
<P>
It is important that you use the "<TT>-d</TT>" flag so that you get new
directories as well as updated files. Remember that some of the automatically
generated header files (<TT>*.h</TT>) or the Windows DLL files
(<TT>*.dll</TT>) may have to be regenerated after a checkout - please
<A HREF="#Easy">repeat the first step from the bootstrapping mechianism</A>
in order to do this.
<H2>
  <A NAME="Write">CVS Write Access</A>
</H2>
<P>
<A HREF="BeforeCommitting.html">CVS Write access</A> is currently reserved
to the <A HREF="/People/W3Cpeople.html">W3C team</A>. Before writing anything
to the repository make sure that you have read the <A HREF="User/Style/">libwww
style guide</A> as well as <A HREF="BeforeCommitting.html"><B>the list of
things to do</B></A> before doing a CVS commit.
<H2>
  <A NAME="Boot">Getting Bootstrapped</A>
</H2>
<P>
When compiling directly from the CVS repository there are a few steps you
have to go through which are already done if compiling from a distribution
package. For example, the <TT>*.h</TT>, <TT>Makefile</TT>, and <TT>*.def</TT>
files must be generated before you can compile. Generate the files by following
these steps:
<H3>
  <A NAME="Easy">Windows and Unix</A>
</H3>
<P>
On both Windows and Unix you can generate the <TT>*.h</TT> files and the
<TT>*.def</TT> files by running a <A HREF="http://www.perl.org">Perl</A>
script provided by <A HREF="/People/Eric/">Eric Prud'hommeaux</A>. Never
mind that it gives a few warnings when it runs - they are all OK. It requires
that you have a recent version of <A HREF="http://www.perl.org">Perl</A>
on your machine. Run the script like this (note the explicit use of the perl
interpreter):
<PRE>% <B>cd libwww</B>
% <B>perl config/winConfigure.pl</B>
</PRE>
<P>
Windows people are now done and can jump directly to the instructions for
<A HREF="../INSTALL.html#Windows">how to compile libwww for Windows</A>.
On Unix, you <A HREF="#More">need some more</A>...
<H3>
  <A NAME="More">Unix (continued)</A>
</H3>
<P>
On Unix you <B>MUST</B> have the following GNU tools installed in order to
continue. Check that you have the following programs with the correct version
number:
<DL>
  <DT>
    <A HREF="http://www.gnu.org/order/ftp.html"><B>gcc</B></A> and
    <A HREF="http://www.gnu.org/order/ftp.html"><B>gmake</B></A>
  <DD>
    Automake relies on features provided by gcc and gmake that don't come with
    other compilers and makes
  <DT>
    <B><A HREF="http://www.gnu.org/software/automake/index.html">GNU automake</A>
    (at least version 1.3)</B>
  <DD>
    Automake is a tool for automatically generating Makefile.in's which are used
    by autoconf
  <DT>
    <B><A HREF="http://www.gnu.org/order/ftp.html">GNU autoconf</A> (at least
    version 2.12)</B>
  <DD>
    A tool for automatically generating Makefile's which are used by make
  <DT>
    <B><A HREF="http://www.gnu.org/software/libtool/libtool.html">GNU libtool</A>
    (at least version 1.1)</B>
  <DD>
    A tool for automatically handling generation of shared libraries
  <DT>
    <B><A HREF="../LineMode/">W3C www</A></B> (<EM>optional</EM>)
  <DD>
    The libwww Line Mode Browser is used to generate the header files (from
    <CODE>.html</CODE> to <CODE>.h</CODE>)
</DL>
<H4>
  Using the GNU Tools
</H4>
<P>
After having checked that you have the programs you need, you are now ready
to use them. Don't worry about the
<A HREF="http://subzero.campus.luth.se/FreeDocs/autoconf-2.12/autoconf_44.html#IDX36">warnings
produced by autoconf</A>&nbsp;- that's OK. Run them like this:
<PRE>% <B>aclocal</B>; <B>automake</B>; <B>autoconf</B>
</PRE>
<H2>
  <A NAME="Compiling">Compiling libwww</A>
</H2>
<P>
Libwww uses <A HREF="http://www.gnu.org/software/libtool/libtool.html">GNU
Libtool</A> in order to build shared libraries on a variety of systems. While
this is very nice for making usable binaries, it can be a pain when trying
to debug a program. For that reason, compilation of shared libraries can
be turned off by specifying the <CODE>--disable-shared</CODE> option to
<CODE>configure</CODE>.
<P>
Congratulations - you are now ready to <A HREF="../INSTALL.html#Unix">compile
libwww</A>!
<P>
  <HR>
<ADDRESS>
  <A HREF="../People/Frystyk/">Henrik Frystyk Nielsen</A>,<BR>
  @(#) $Id$
</ADDRESS>
</BODY></HTML>
