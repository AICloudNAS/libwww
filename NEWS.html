<HTML>
<HEAD>
  <TITLE>W3C Sample Code Library Release Notes</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<P>
<A HREF="../../"><IMG ALT="W3C" SRC="../../Icons/WWW/w3c_home" BORDER="0"></A>
<A HREF="../"><IMG ALT="libwww" SRC="../../Icons/WWW/Lib48x" BORDER="0"></A>
<IMG BORDER="0" SRC="../../Icons/WWW/relnotes48x" ALT="RELEASE">
<H1>
  Library 5.1 Release Notes
</H1>
<P>
If you are reading the text version of this document then you can find a
HTML version in
<PRE>Library/User/ReleaseNotes.html
</PRE>
<P>
The main features in this release are:
<UL>
  <LI>
    Full HTTP/1.1 sample implementation
  <LI>
    Advanced use of HTTP/1.1 Pipelining and persistent connections
  <LI>
    Persistent cache manager
</UL>
<P>
The focus for version 5.1 was to implement a high-performance HTTP/1.1 client
used as a testbed for the
"<A HREF="../../Protocols/HTTP/Performance/Pipeline.html">Network Performance
Effects of HTTP/1.1, CSS1, and PNG</A>" paper. Note that this code is sample
code so please take it as that and nothing more!
<P>
<IMG BORDER="0" SRC="../../Icons/32x32/caution" ALT="NOTE"> <B>Check out
the latest &nbsp;<A HREF="Guide/">WWW APIs</A> and &nbsp;a complete
<A HREF="Extrnals.html">list of public functions</A></B>
<P>
  <HR>
<H2>
  Release 5.1m (to be released)
</H2>
<P>
These are the things that are upcoming in the next release
<H3>
  New Features
</H3>
<UL>
  <LI>
    Added support for <A HREF="../src/HTMIMERq.html">writing out <TT>Link:</TT>
    header fields</A> when <A HREF="../src/HTAccess.html">uploading a document</A>.
    The <TT>Link:</TT> header field is use to represent link relationship between
    documents 
  <LI>
    Changed <A HREF="../src/HTEscape.html">HTEscape</A> to deal with silly MSDos
    file type escaping of &nbsp;the drive name (using ":").
  <LI>
    Added support for <A
    HREF="../../ComLine/User/CommandLine.html#auth">automatic
    authentication (!)</A> in the <a HREF="../../ComLine/">Command
    Line</A> Tool so that it is now possile to authenticate from
    scipts etc.
  <LI>
    <A HREF="../cvs.html">Direct access to the CVS repository</A> - checkout
    libwww and work with the latest version!
  <LI>
    Made sure that we write more often as we check for expired timers in HTWriter.c
  <LI>
    Added a "repetitive" flag to timers so that they can be created to say call
    me every 30ms over and over again
  <LI>
    Added support for building libwww as a shared library on Unix (it is already
    using DLLs on Windows). If you have any problems with shared libraries on
    your platform then <A HREF="../../INSTALL.html">run configure</A> with the
    <CODE>--disable-shared</CODE> flag and you will only get the static version.
    If you are using libwww as a shared library but do <EM>not</EM> use the
    <A HREF="../src/WWWHTML.html">libwww HTML parser</A> then you MUST include
    this <A HREF="../src/HTextImp.html">dummy implementation</A> of the
    <A HREF="../src/HText.html">HText interface</A> somewhere in your code. The
    reason for this is that the HText interface may be called (it depends a bit
    on how your platform supports shared libraries) but an implementation isn't
    provided.
  <LI>
    Added support for <A HREF="http://www.tcx.se/">MySQL</A> access in
    <A HREF="../src/HTSQL.html">this simple SQL interface</A> which takes care
    of most os the common problems encountered when talking to an SQL server.
    Currently I use this for <A HREF="../src/HTSQLLog.html">handling logging</A>
    in <A HREF="../../Robot/User/CommandLine.html#Logging">the webbot </A>but
    many other features like persistent caching, preferences, etc. can use the
    <A HREF="../src/HTSQL.html">SQL module</A> as well. You can also see some
    <A HREF="../../Robot/www-sql/">cool examples</A> of how to use the robot's
    logs when querying <A HREF="http://www.tcx.se/">MySQL</A> through
    <A HREF="http://www.daa.com.au/~james/www-sql/">www-sql</A>.
  <LI>
    Changed the name of "<TT>config.h</TT>" to "<TT>wwwconf.h</TT>" as the
    <A HREF="http://lists.w3.org/Archives/Public/www-lib/1998JanMar/0039.html">first
    name caused conflicts with other packages</A>
  <LI>
    Changed the name of "<TT>sysdep.h</TT>" to "<TT>wwwsys.h</TT>" for the same
    reason
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a bug in the <A href="../src/HTParse.html">generation of relative
    URIs</A> which caused the creation of incorrecte relative URIs. Libwww uses
    relative URIs in the HTTP referer field and other places to save (often
    significant) amount of bandwidth.
  <LI>
    Decreased mdefault max number of outstanding (pipelined) requests from 100
    to 50
  <LI>
    Does now check whether we get a broken pipe when writing to the network from
    expired timers. This was a bug that it didn't.
  <LI>
    Applied the <A HREF="Patch/5.1l/">following patches</A>
  <LI>
    Fixed a problem in the HTWWWStr.c that caused a
    <A HREF="http://lists.w3.org/Archives/Public/www-lib/1998AprJun/0000.html">Y2K
    bug if strftime isn't available</A> on the system on where libwww is running
</UL>
<H2>
  Release 5.1l March 25, 1998
</H2>
<P>
This is a small add-on to 5.1k that was released two days ago. It has a few
fixes that was discovered while working with the latest
<A HREF="http://www.yggdrasil.com/Products/Arena/">Arena browser</A>.
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Minor stuff that made PUT work nicer from a user perspective (when to ask
    what questions, etc)
  <LI>
    Fixed a few things in the direct WAIS access module
</UL>
<H2>
  Release 5.1k March 23, 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Added a simple "single user lock" on the persistent cache as it gets confused
    if multiple users are using it.
  <LI>
    On Unic, the header files are now installed when running "<TT>make
    install</TT>". The default location is
    <TT>"/usr/local/include/w3c-libwww</TT>".
  <LI>
    On Unix, aset of icons that can be used when browsing local file directories
    are also installed - the default location is
    "<TT>/usr/local/share/w3c-libwww</TT>"
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    <A HREF="Patch/5.1j/">These are the patches</A> that I have recieved for
    the current release. They will be applied to this upcoming release.
  <LI>
    Fixed a few bugs that make
    <A HREF="http://www.yggdrasil.com/Products/Arena/">Arena</A> run on top of
    the latest version
</UL>
<H2>
  Release 5.1j March 9, 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Made the distinction between Transfer-Encoding and Content-Transfer-Encoding
    clear - they were somewhat mixed up before. Libwww also now supports multiple
    transfer-codings as well as multiple content-codings as required by
    <A HREF="../../Protocols/History/#latest">HTTP/1.1</A>.
  <LI>
    Changed the <A HREF="../src/HTFormat.html">Stream Stack</A> to not call the
    <CODE>SaveLocally</CODE> stream any more but instead return an ErrorStream.
    The reason for this is that there are several places in the stram stack building
    algorithm where we might want to save the file to local file: when there
    is a content type that we don't understand, a content-encoding, or a
    transfer-encoding (or a combiunation of these) that we don't understand.
    Now we can make sure that the <CODE>SaveLocally</CODE> stream is only called
    once
  <LI>
    Added support for "<B>identity</B>" transfer-coding and content-coding
  <LI>
    Added support for Allow header when doing PUT and POST
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a problem handling wrong HTTP responses from NCSA HTTPD dereived servers
    (they don't include a version number when responding to an HTTP/1.1 request)
  <LI>
    PUT now works much more reliable, and it also works on Windows (at least
    &nbsp;NT, I haven't tested it on 95).
  <LI>
    Fixed a refresh problem in the <A HREF="../../LineMode/">Line Mode Browser</A>
    which caused it to sometimes render the screen twice.
</UL>
<H2>
  Release 5.1f January 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Changed the referer HTTP header field to use relative URIs instead of absolute.
    This saves a lot of bytes on the wire
  <LI>
    Added support for <A HREF="../../Robot/User/CommandLine.html#Logging">logging
    the charset media type parameter</A>
  <LI>
    Added support for <A HREF="../../Robot/User/CommandLine.html#Inlined">logging
    when the ALT tag is missing</A> from inlined images
  <LI>
    Extended the <A HREF="../src/HTLog.html">log class</A> to support arbitrary
    log files
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed some problems in the HTRelative function in
    <A HREF="../src/HTParse.html">HTParse</A>.
</UL>
<H2>
  Release 5.1e January 1998
</H2>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Added support for linking against a
    <A HREF="http://www.delorie.com/gnu/docs/rx/rx_3.html">POSIX Regular
    Expression</A> (regex) library. This is used in the
    <A HREF="../../Robot/">Robot</A>, for example, to support
    <A HREF="../../Robot/User/CommandLine.html#Constraints">regular expressions
    on URIs</A> to include and exclude from a traversal. The code has been tested
    with the <A HREF="http://ftp.digital.com/pub/GNU/">GNU regex library</A>.
  <LI>
    Added more <A HREF="../../Robot/User/CommandLine.html#Logging">logging features
    to the webbot</A>
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed bug in <A HREF="../src/HTWriter.html">ouputstream</A> that caused buffer
    to be overwritten in some cases when blocked on write
</UL>
<H2>
  Release 5.1d December 1997
</H2>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Lots of bug fixes in the
    <A HREF="../../Protocols/HTTP/Forum/PipeliningNotes.html">pipelining code</A>
    and increased performance
</UL>
<H3>
  New Features
</H3>
<UL>
  <LI>
    Better logging facilities with support for <A HREF="../src/HTLog.html">multiple
    log objects</A> including referer logging, Common Log File format logging
    and general logging filters.
</UL>
<H2>
  Release 5.1c September 1997
</H2>
<UL>
  <LI>
    Lots of bug fixes
</UL>
<H2>
  Release 5.1b April 1997
</H2>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    Fixed a problem in <A HREF="../src/HTRules.html">HTRules.c</A> as described
    in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00248.html">this
    bug report</A>
  <LI>
    Fixed coredump problem in <A HREF="../src/HTInet.html">HTGetTmpFileName()</A>
    as described in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00247.html">this
    bug report</A>. This affects also the
    <A HREF="../src/HTCache.html">HTCache</A> module which relies on temporary
    file names
  <LI>
    Made the <A HREF="../src/HTCache.html">persistent cache</A> more robust which
    in some cases will save a segmentation fault
  <LI>
    Fixed problem in <A HREF="../src/wwwsys.html">wwwsys.h</A> as reported in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00249.html">this
    bug report</A>
  <LI>
    Fixed problem where a request was not flushed if using blocking sockets as
    reported by
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00250.html">this
    bug report</A>.
  <LI>
    A limitation in the current persistent cache is that it only works in
    non-preemptive mode. Hence if using blocking sockets then the cache should
    be disabled. This is now the default behavior in the
    <A HREF="../src/HTProfil.html">libwww profiles</A>.
  <LI>
    Bug fixed that caused the <CODE>maxsock</CODE> variable used in
    <CODE>select()</CODE> not to be decreased when deleting a socket in the default
    <A HREF="../src/HTEvtLst.html">event manager</A>
  <LI>
    Changed the connection management so that it complies with the
    <A HREF="http://www.ics.uci.edu/pub/ietf/http/draft-ietf-http-connection-00.txt">Connection
    Management</A> draft by Jim Gettys and Alan Freier. The HTTP client now closes
    idle connections after 60 seconds which is a heuristic period chosen by Jeff
    Mogul in the paper
    "<A HREF="http://www.research.digital.com/wrl/techreports/abstracts/95.4.html">The
    Case for Persistent-Connection HTTP</A>". The number can be dynamically changed
    using the <CODE>HTHost_setPersistTimeout() </CODE>and the
    <CODE>HTHost_persistTimeout() </CODE>methods. This could be made more advanced
    so that we take into account any information given in the
    "<TT>Keep-Alive</TT>" header but isn't for now.
  <LI>
    Fixed a problem when a HTTP/1.1 server sent a response including a
    <TT>Connection: close</TT> header using the close of the TCP connection as
    a delimiter. This problem was pointed out in
    <A HREF="http://lists.w3.org/Archives/Public/www-lib-bugs/msg00254.html">this
    bug report</A>
  <LI>
    Fixed security hole handling <A HREF="../src/HTTP.c">HTTP 305 proxy redirection
    codes</A>. The proxy location returned in the responses was enabled as a
    permanent proxy without any notification. The operation now requires explicit
    acknowledgement from the user
  <LI>
    Fixed potential (but small) security whole handling
    <A HREF="../src/HTRules.html">parsing a new rules file</A>. This operation
    now requires explicit acknowledgement from the user.
</UL>
<H2>
  Release 5.1 February 18 1997
</H2>
<H3>
  New Features and APIs
</H3>
<UL>
  <LI>
    Added support &nbsp;pipelining
  <LI>
    Support for zlib based decompression in content encoding
</UL>
<H3>
  Bug Fixes
</H3>
<UL>
  <LI>
    A whole bunch of them...
</UL>
<P>
  <HR>
<ADDRESS>
  Henrik Frystyk Nielsen,
  <A HREF="mailto:libwww@w3.org">libwww@w3.org</A>,<BR>
  @(#) $Id$
</ADDRESS>
</BODY></HTML>
